<div class="login-container">
  <div class="login-card">
    <button class="back-btn" (click)="goBack()">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <line x1="19" y1="12" x2="5" y2="12"/>
        <polyline points="12 19 5 12 12 5"/>
      </svg>
      Back
    </button>

    <div class="login-header">
      @if (activeTab() === 'login') {
        <h1>Welcome Back</h1>
        <p>Sign in to access your presets</p>
      } @else {
        <h1>Create Account</h1>
        <p>Join SampleStudio today</p>
      }
    </div>

    <!-- Tabs -->
    <div class="auth-tabs">
      <button 
        class="auth-tab" 
        [class.active]="activeTab() === 'login'"
        (click)="setActiveTab('login')">
        Sign In
      </button>
      <button 
        class="auth-tab"
        [class.active]="activeTab() === 'register'"
        (click)="setActiveTab('register')">
        Sign Up
      </button>
    </div>

    <!-- Error/Success Messages -->
    @if (errorMessage()) {
      <div class="message error">{{ errorMessage() }}</div>
    }
    @if (successMessage()) {
      <div class="message success">{{ successMessage() }}</div>
    }

    <!-- Login Form -->
    @if (activeTab() === 'login') {
      <form (ngSubmit)="onLogin()" class="auth-form">
        <div class="form-group">
          <label for="login-email">Email</label>
          <input 
            type="email" 
            id="login-email" 
            [(ngModel)]="loginEmail"
            name="email"
            placeholder="you@example.com" 
            required>
        </div>

        <div class="form-group">
          <label for="login-password">Password</label>
          <input 
            type="password" 
            id="login-password"
            [(ngModel)]="loginPassword"
            name="password"
            placeholder="Your password" 
            required>
        </div>

        <button type="submit" class="submit-btn" [disabled]="isLoading()">
          @if (isLoading()) {
            <span class="spinner"></span>
            Signing in...
          } @else {
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"/>
              <polyline points="10 17 15 12 10 7"/>
              <line x1="15" y1="12" x2="3" y2="12"/>
            </svg>
            Sign In
          }
        </button>
      </form>
    }

    <!-- Register Form -->
    @if (activeTab() === 'register') {
      <form (ngSubmit)="onRegister()" class="auth-form">
        <div class="form-group">
          <label for="register-username">Username</label>
          <input 
            type="text" 
            id="register-username"
            [(ngModel)]="registerUsername"
            name="username"
            placeholder="Choose a username" 
            required
            minlength="3">
        </div>

        <div class="form-group">
          <label for="register-email">Email</label>
          <input 
            type="email" 
            id="register-email"
            [(ngModel)]="registerEmail"
            name="email"
            placeholder="you@example.com" 
            required>
        </div>

        <div class="form-group">
          <label for="register-password">Password</label>
          <input 
            type="password" 
            id="register-password"
            [(ngModel)]="registerPassword"
            name="password"
            placeholder="Minimum 6 characters" 
            required
            minlength="6">
        </div>

        <button type="submit" class="submit-btn" [disabled]="isLoading()">
          @if (isLoading()) {
            <span class="spinner"></span>
            Creating account...
          } @else {
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
              <circle cx="8.5" cy="7" r="4"/>
              <line x1="20" y1="8" x2="20" y2="14"/>
              <line x1="23" y1="11" x2="17" y2="11"/>
            </svg>
            Create Account
          }
        </button>
      </form>
    }

    <div class="divider"><span>or</span></div>

    <div class="auth-footer">
      <a href="/home.html">Continue as Guest</a>
    </div>
  </div>
</div>
